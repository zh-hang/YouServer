# chatroom

## 聊天室列表

### API

http://124.70.97.253:5000/chatroom/list

### 返回值

| 字段      | 内容       | 备注     |
| --------- | ---------- | -------- |
| room_list | 聊天室列表 | list结构 |

#### room_list字段

| 字段       | 内容           | 备注    |
| ---------- | -------------- | ------- |
| name       | 聊天室名称     |         |
| population | 聊天室现有人数 | int类型 |

#### 示例

```json
{
    "rooms":[
        {
            "name":"",
            "population":0
        }
    ]
}
```



## 创建聊天室

### API

http://124.70.97.253:5000/chatroom/create

### 参数

| 参数名 | 内容       | 备注 |
| ------ | ---------- | ---- |
| name   | 聊天室名字 |      |

### 返回值JSON

| 字段   | 内容               | 备注                   |
| ------ | ------------------ | ---------------------- |
| status | 创建结果           | 1：成功<br />0：失败   |
| name   | 创建的聊天室的名字 | 失败的情况下名称为空串 |

#### 示例

```josn
{
	"status":0,
	"name":"",
}
```

## 聊天

### API

ws://124.70.97.253:2333

### 数据包格式JSON

| 字段 | 内容       | 备注                                                         |
| ---- | ---------- | ------------------------------------------------------------ |
| type | 数据包类型 | join：加入聊天室，只能由客户端发出<br />leave：离开聊天室，只能由客户端发出<br />user：用户动态，只能由服务端发出<br />msg：用户消息 |
| data | 数据       |                                                              |

#### data字段

| 字段      | 内容       | 备注                        |
| --------- | ---------- | --------------------------- |
| user_name | 用户名称   | 不能为空                    |
| room_name | 聊天室名称 | type为join和leave时不能为空 |
| msg       | 用户消息   | type为msg时不能为空         |

#### 示例

```json
{
    "type":"",
    "data":{
        "user_name":"",
        "room_name":"",
        "msg":"",
    }
}
```